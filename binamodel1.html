<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>3D Dönen Bina - Tuğla Dış Cephe & Kiremit Çatı</title>
<style>
  body, html {
    margin: 0; padding: 0; height: 100%;
    background: transparent;
    overflow: hidden;
    display: flex;
    justify-content: center;
    align-items: center;
  }
  #container {
    width: 80vw;
    height: 80vh;
  }
</style>
</head>
<body>
<div id="container"></div>

<script src="https://cdn.jsdelivr.net/npm/three@0.152.2/build/three.min.js"></script>

<script>
  const container = document.getElementById('container');
  const scene = new THREE.Scene();

  const camera = new THREE.PerspectiveCamera(45, window.innerWidth/window.innerHeight, 0.1, 1000);
  camera.position.set(0, 10, 22);
  camera.lookAt(0, 6, 0);

  const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
  renderer.setSize(window.innerWidth * 0.8, window.innerHeight * 0.8);
  renderer.setClearColor(0x000000, 0);
  container.appendChild(renderer.domElement);

  const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);
  scene.add(ambientLight);

  const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
  directionalLight.position.set(10, 20, 10);
  scene.add(directionalLight);

  const textureLoader = new THREE.TextureLoader();

  // Tuğla duvar dokusu
  const brickTexture = textureLoader.load('https://threejs.org/examples/textures/brick_diffuse.jpg');
  brickTexture.wrapS = brickTexture.wrapT = THREE.RepeatWrapping;
  brickTexture.repeat.set(2, 2);

  const wallMat = new THREE.MeshStandardMaterial({
    map: brickTexture,
    color: 0x8B5A2B, // açık kahverengi ton
    roughness: 0.8,
    metalness: 0.1
  });

  const doorMat = new THREE.MeshPhongMaterial({color: 0x5a3e1b});
  const windowMat = new THREE.MeshPhongMaterial({color: 0x87ceeb, opacity: 0.6, transparent: true});
  const balconyMat = new THREE.MeshPhongMaterial({color: 0x7a5c3a});

  // Kiremit çatı dokusu ve malzeme
  const roofTexture = textureLoader.load('https://threejs.org/examples/textures/roof_tiles.jpg');
  roofTexture.wrapS = roofTexture.wrapT = THREE.RepeatWrapping;
  roofTexture.repeat.set(4, 2);

  const roofMat = new THREE.MeshStandardMaterial({
    map: roofTexture,
    color: 0xb7410e, // kiremit rengi
    roughness: 0.7,
    metalness: 0.1
  });

  const building = new THREE.Group();

  const floorHeight = 3.5;
  const floorWidth = 8;
  const floorDepth = 6;

  for(let i=0; i<5; i++) {
    const floorGroup = new THREE.Group();

    const walls = new THREE.Mesh(
      new THREE.BoxGeometry(floorWidth, floorHeight, floorDepth),
      wallMat
    );
    floorGroup.add(walls);

    if(i === 0) {
      const door = new THREE.Mesh(
        new THREE.BoxGeometry(2, 2.5, 0.2),
        doorMat
      );
      door.position.set(0, -floorHeight/2 + 1.25, floorDepth/2 + 0.11);
      floorGroup.add(door);
    }

    const windowSize = {w: 1.2, h: 1.5, d: 0.1};
    const gap = 2; // Yan cephe pencereleri arası mesafe

    if(i !== 0) {
      // Ön cephe pencereleri eski konumda
      const win1 = new THREE.Mesh(new THREE.BoxGeometry(windowSize.w, windowSize.h, windowSize.d), windowMat);
      win1.position.set(-floorWidth/4, 0, floorDepth/2 + 0.11);
      floorGroup.add(win1);
      const win2 = win1.clone();
      win2.position.set(floorWidth/4, 0, floorDepth/2 + 0.11);
      floorGroup.add(win2);

      // Yan cephe pencereleri ortalanıp arası açıldı
      for(let side of [1, -1]) {
        const baseX = side * (floorWidth/2 + 0.11);
        const baseY = 0;

        const winSide1 = new THREE.Mesh(new THREE.BoxGeometry(windowSize.w, windowSize.h, windowSize.d), windowMat);
        winSide1.position.set(baseX, baseY, gap / 2);
        winSide1.rotation.y = Math.PI / 2;
        floorGroup.add(winSide1);

        const winSide2 = new THREE.Mesh(new THREE.BoxGeometry(windowSize.w, windowSize.h, windowSize.d), windowMat);
        winSide2.position.set(baseX, baseY, -gap / 2);
        winSide2.rotation.y = Math.PI / 2;
        floorGroup.add(winSide2);
      }
    }

    // Balkonlar 2. kattan itibaren
    if(i !== 0){
      const balconyCenter = new THREE.Mesh(new THREE.BoxGeometry(2, 0.4, 1.5), balconyMat);
      balconyCenter.position.set(0, -floorHeight/2 + 0.25, floorDepth/2 + 0.5);
      floorGroup.add(balconyCenter);

      const balconySideRight = new THREE.Mesh(new THREE.BoxGeometry(0.4, 0.8, 1.5), balconyMat);
      balconySideRight.position.set(1.2, -floorHeight/2 + 0.65, floorDepth/2 + 0.5);
      floorGroup.add(balconySideRight);

      const balconySideLeft = new THREE.Mesh(new THREE.BoxGeometry(0.4, 0.8, 1.5), balconyMat);
      balconySideLeft.position.set(-1.2, -floorHeight/2 + 0.65, floorDepth/2 + 0.5);
      floorGroup.add(balconySideLeft);
    }

    floorGroup.position.y = i * floorHeight;

    building.add(floorGroup);
  }

  const roofGeometry = new THREE.ConeGeometry(5.8, 3, 20);
  const roof = new THREE.Mesh(roofGeometry, roofMat);
  roof.position.y = 4.93 * floorHeight;
  roof.rotation.y = Math.PI / 4;
  building.add(roof);

  building.scale.set(1.5, 1.5, 1.5);

  scene.add(building);

  const rotationSpeed = 0.002;

  function animate() {
    requestAnimationFrame(animate);
    building.rotation.y += rotationSpeed;
    renderer.render(scene, camera);
  }
  animate();

  window.addEventListener('resize', () => {
    renderer.setSize(window.innerWidth * 0.8, window.innerHeight * 0.8);
    camera.aspect = (window.innerWidth * 0.8) / (window.innerHeight * 0.8);
    camera.updateProjectionMatrix();
  });
</script>
</body>
</html>
